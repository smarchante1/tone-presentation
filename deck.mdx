import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { dracula, shadesOfPurple } from "@code-surfer/themes";

export const theme = shadesOfPurple;

# Music In The Browser üé∂

With [Tone.js](https://tonejs.github.io/) 

---

## What we'll learn


- How to create instruments with Tone.js

- Leverage libraries to create songs

- Utilize creative-coding to build interactive media

---

## About this workshop

- Watch or **code along** with companion modules

- Plug in some headphones and use a **safe volume level**

*Let's get started!*

---

<CodeSurfer>

```js title="Hello Tone" subtitle="Let's play our first note!"
import * as Tone from 'tone'

  const synth = new Tone.Synth().toDestination();

  synth.triggerAttackRelease("A4", "8n");
```

```diff 3 subtitle="Create a new synth instrument"

```

```diff 5 subtitle="Trigger an A that lasts an 8th note"

```

</CodeSurfer>

---

<CodeSurferColumns themes={[shadesOfPurple, dracula]}>

<Step>

```js title="FM Synthesizer" 
fmSynth.triggerAttackRelease("A4", "8n");
```

```js title="AM Synthesizer" 
amSynth.triggerAttackRelease("A4", "8n");
```

</Step>

<Step>

```js
import * as Tone from 'tone'
        
// FM Synth
const fmSynth = new Tone.FMSynth().toDestination();

//  .triggerAttackRelease makes a note sound
fmSynth.triggerAttackRelease("A4", "8n");
```

```js
import * as Tone from 'tone'
        
// AM Synth
const amSynth = new Tone.AMSynth().toDestination();

//  .triggerAttackRelease makes a note sound
amSynth.triggerAttackRelease("A4", "8n");
```

</Step>

</CodeSurferColumns>

---

<CodeSurfer>

```js title="Sampler Instrument" subtitle="Loading an mp3 file"
import * as Tone from 'tone'
        
const player = new Tone.Player("https://tonejs.github.io/audio/berklee/drum_low_1.mp3").toDestination();

function playSample() {
  Tone.loaded().then(() => {
  player.start();
  });
}
```

```diff 3 subtitle="Initialize a new player variable"

```

```diff 5 subtitle="Build a function to load audio"

```

```diff 7 subtitle="Start the audio after the mp3 has loaded"

```


</CodeSurfer>

---

# Let's learn a few more Tone tricks, shall we?

---

<CodeSurfer>

```js title="Utilizing Click Handlers" subtitle="This function will trigger a note when called"

    function playNote(note) {
      synth.triggerAttackRelease(`${note}4`, "8n");
    }

```

```diff 3 subtitle="We'll interpolate our note argument as a parameter"

```

```js title="Mapping The Function" subtitle="Pass the playNote as the arrow function body"

   <button className="generic-button" onClick={() => playNote("A")}>A</button> 

```

</CodeSurfer>

---

## On To Building Tone Loops!

---

<CodeSurfer>

```js title="Tone.js Audio Loops" subtitle="We'll utilize various Tone functions to build loops"

const notes = ['Eb4','G4','F4','Ab4']
    
const sequence1 = new Tone.Sequence(function(time, note) {
  synth.triggerAttackRelease(note, 0.5);
}, notes, '4n');

Tone.Transport.bpm.value = 80; //how many beats(quarter notes) per minute
Tone.Transport.start();
    
function mouseClick() {
  Tone.start();
  sequence1.start();
}

function stop() {
  sequence1.stop();
}
```

```diff 2 subtitle="Start by building an array of notes"

```

```diff 4:6 subtitle="Use the Sequence function to trigger notes on a time interval"

```

```diff 8:9 subtitle="Set the beats per minute and initialize the main timekeeper"

```


```js title="Tone.js Loop" subtitle="Let's give it a go!"

const notes = ['Eb4','G4','F4','Ab4']
    
const sequence1 = new Tone.Sequence(function(time, note) {
  synth.triggerAttackRelease(note, 0.5);
}, notes, '4n');

Tone.Transport.bpm.value = 80; //how many beats(quarter notes) per minute
Tone.Transport.start();
    
function mouseClick() {
  Tone.start();
  sequence1.start();
}

function stop() {
  sequence1.stop();
}

```

</CodeSurfer>

---

## Now Let's Put It All Together

### üéπ Piano Roll Time üéπ

---

# What have we learned?

- How to create dynamic synth patterns with **Tone.js**
- How to map notes to buttons and build simple loops for use in a **Piano Roll**
- How to leverage code to build interactive music experiences! üôåüèΩ

*Thank you!*

## ‚ùì‚ùì Q+A Time ‚ùì‚ùì